<!-- 
Artifact: sapppspricing-ppe-module-spring 
@Copyright (c) 2016, SAP SE, Germany, All rights reserved. 
-->
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd
           http://www.springframework.org/schema/aop
           http://www.springframework.org/schema/aop/spring-aop.xsd
		   http://www.springframework.org/schema/util
		   http://www.springframework.org/schema/util/spring-util.xsd">

	<!-- Depending on the value of property sap.sapppspricing.db.dstype either use the DataSource
	     with direct specification connection parameters ("Direct") or the DataSource specified via 
	     Jndi. The value of this property injected into the PPS application context from the hybris app context -->
	<alias name="sapDefault${sap.sapppspricing.db.dstype}DataSource" alias="sapDataSource" />

	<!-- Lazy init to avoid errors in case connection parameters are not set -->
	<bean id="sapDefaultDirectDataSource" factory-bean="sapLocalPpsDataSourceFactory" factory-method="create" lazy-init="true"
		destroy-method="close" />

	<!-- Factory for org.apache.commons.dbcp.BasicDataSource with setting of validation query.
	     Note that formerly a org.apache.tomcat.dbcp.dbcp.BasicDataSource was created, but this is not on the compile path -->
	<bean id="sapLocalPpsDataSourceFactory" parent="sapAbstractDataSourceFactory"
		class="com.sap.retail.sapppspricing.pps.localdb.LocalPPSDataSourceFactory" />

	<!-- Lazy init to avoid errors in case Jndi name is not set -->
	<bean id="sapDefaultJndiDataSource" class="org.springframework.jndi.JndiObjectFactoryBean" lazy-init="true">
		<property name="jndiName" value="${sap.sapppspricing.db.jndiname}" />
	</bean>

</beans>