<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ [y] hybris Platform
  ~
  ~ Copyright (c) 2000-2016 hybris AG
  ~ All rights reserved.
  ~
  ~ This software is the confidential and proprietary information of hybris
  ~ ("Confidential Information"). You shall not disclose such Confidential
  ~ Information and shall use it only in accordance with the terms of the
  ~ license agreement you entered into with hybris.
-->

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd
           http://www.springframework.org/schema/aop
           http://www.springframework.org/schema/aop/spring-aop.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context.xsd">

	<context:annotation-config />

	<context:component-scan
		base-package="com.sap.retail.isce.frontend.controllers" />

	<!-- Expose /acceleratoraddon/web/webroot/WEB-INF/messages/base.js.properties 
		resource bundle as javascript variables -->
	<bean id="defaultYinstorecsfrontendaddonJavaScriptMessageResourceAccessor"
		parent="abstractJavaScriptMessageResourceAccessor">
		<property name="addOnName" value="yinstorecsfrontendaddon" />
	</bean>

	<bean id="defaultYinstorecsfrontendaddonBeforeViewJsPropsHandlerAdaptee"
		parent="abstractBeforeViewJsPropsHandlerAdaptee"
		class="de.hybris.platform.addonsupport.interceptors.ExportJsPropertiesBeforeViewHandler">
		<property name="messageSource"
			ref="defaultYinstorecsfrontendaddonJavaScriptMessageResourceAccessor" />
	</bean>

	<bean id="getYinstorecsfrontendaddonBeforeViewHandler" parent="beforeViewHandlerAdapter">
		<property name="adaptee">
			<ref bean="defaultYinstorecsfrontendaddonBeforeViewJsPropsHandlerAdaptee" />
		</property>
	</bean>
	<bean id="YinstorecsfrontendaddonBeforeViewHandlerListMergeDirective"
		depends-on="beforeViewHandlersList" parent="listMergeDirective">
		<property name="add" ref="getYinstorecsfrontendaddonBeforeViewHandler" />
	</bean>

	<bean id="instorecsTakeHomeActionComponentRenderer"
		class="com.sap.retail.isce.frontend.renderer.InstorecsComponentRenderer"
		parent="assistedServiceComponentRenderer">
	</bean>

	<bean id="instorecsTakeHomeActionComponentRendererMapping"
		class="de.hybris.platform.addonsupport.renderer.impl.AddOnCMSComponentRendererMapping">
		<property name="typeCode" value="TakeHomeNowAction" />
		<property name="renderer" ref="instorecsTakeHomeActionComponentRenderer" />
	</bean>
 
	<bean id="instoreOrderDetailPickupComponentRenderer"
		class="com.sap.retail.isce.frontend.renderer.InstorecsComponentRenderer"
		parent="assistedServiceComponentRenderer">
	</bean>

	<bean id="instoreOrderDetailPickupComponentRendererMapping"
		class="de.hybris.platform.addonsupport.renderer.impl.AddOnCMSComponentRendererMapping">
		<property name="typeCode" value="OrderDetailPickupComponent" />
		<property name="renderer" ref="instoreOrderDetailPickupComponentRenderer" />
	</bean>

	<alias alias="instorecsStatusCheck" name="defaultInstorecsStatusCheck" />
	<bean id="defaultInstorecsStatusCheck"
		class="com.sap.retail.isce.frontend.util.impl.StatusCheckImpl">
		<property name="instorecsContextFacade" ref="instoreAssistedServiceFacade" />
		<property name="noConsignmentCheck" value="${instorecsfacade.autoCreateDeliveryAndPick}" />

	</bean>

	<bean name="customer360PageController"
		class="com.sap.retail.isce.frontend.controllers.pages.Customer360PageController">
	</bean>

	<bean name="CMSISCECustomer360ComponentController"
		class="com.sap.retail.isce.frontend.controllers.cms.CMSISCECustomer360ComponentController">
		<property name="customerFacade" ref="customerFacade" />
		<property name="customer360Facade" ref="customer360Facade" />
		<property name="springUtil" ref="springUtil" />
		<property name="dataContainerBeanAliases"
			value="marketingAttributesDataContainer,personalDetailsDataContainer,NewsletterSubscriptionDataContainer,CARStatisticalDataContainerOverallVolume,
			       CARStatisticalDataContainerOverallCount,CARStatisticalDataContainerSixMonthVolume,CARStatisticalDataContainerOverallItemsCount,
			       CARStatisticalDataContainerLastPurchase,statisticalDataContainer,objectScoresDataContainerAge,objectScoresDataContainerActivity,
			       objectScoresDataContainerSentiment,itemsOfInterestDataContainer,genericScoresDataContainer,CARPurchaseHistoryDataContainerCustomerOrders">
		</property>
		<property name="sessionService" ref="sessionService" />
	</bean>

	<bean name="CMSISCEPurchaseHistoryComponentController"
		class="com.sap.retail.isce.frontend.controllers.cms.CMSISCEPurchaseHistoryComponentController">
		<property name="customerFacade" ref="customerFacade" />
		<property name="customer360Facade" ref="customer360Facade" />
		<property name="springUtil" ref="springUtil" />
		<property name="dataContainerBeanAliases"
			value="CARPurchaseHistoryDataContainerCustomerOrders">
		</property>
		<property name="sessionService" ref="sessionService" />
		<property name="siteConfigService" ref="siteConfigService" />
		<property name="baseSiteService" ref="baseSiteService"/>
		<property name="siteBaseUrlResolutionService" ref="siteBaseUrlResolutionService"/>
	</bean>
	
	<bean name="CMSISCEChangeOrderActionController"
		class="com.sap.retail.isce.frontend.controllers.cms.CMSISCEChangeOrderActionController">
		<property name="orderChangeFacade" ref="orderChangeFacade" />
	</bean>

	<bean name="marketingAttributesDataContainer"
		class="com.sap.retail.isce.container.impl.MarketingAttributesDataContainer"
		scope="prototype">
		<constructor-arg ref="isceConfigurationService" />
		<property name="i18nService" ref="i18nService" />
		<property name="messageSource" ref="storefrontMessageSource" />
	</bean>

	<bean name="personalDetailsDataContainer"
		class="com.sap.retail.isce.container.impl.PersonalDetailsDataContainer"
		scope="prototype">
		<property name="i18nService" ref="i18nService" />
		<property name="messageSource" ref="storefrontMessageSource" />
		<property name="userService" ref="userService" />
	</bean>

	<bean id="statisticalDataContainer"
		class="com.sap.retail.isce.container.impl.StatisticalDataContainer"
		scope="prototype">
		<property name="i18nService" ref="i18nService" />
		<property name="messageSource" ref="storefrontMessageSource" />
		<property name="priceDataFactory" ref="priceDataFactory" />
		<property name="statisticalDataSalesVolumeUtil" ref="statisticalDataSalesVolumeUtil" />
		<property name="springUtil" ref="springUtil" />
	</bean>

	<bean id="CARStatisticalDataContainerOverallVolume"
		class="com.sap.retail.isce.container.impl.CARStatisticalDataContainerOverallVolume"
		scope="prototype">
		<constructor-arg ref="isceConfigurationService" />
		<property name="messageSource" ref="storefrontMessageSource" />
		<property name="i18nService" ref="i18nService" />
		<property name="userService" ref="userService" />
		<property name="statisticalDataSalesVolumeUtil" ref="statisticalDataSalesVolumeUtil" />
	</bean>

	<bean id="CARStatisticalDataContainerOverallCount"
		class="com.sap.retail.isce.container.impl.CARStatisticalDataContainerOverallCount"
		scope="prototype">
		<constructor-arg ref="isceConfigurationService" />
		<property name="messageSource" ref="storefrontMessageSource" />
		<property name="i18nService" ref="i18nService" />
		<property name="userService" ref="userService" />
	</bean>

	<bean id="CARStatisticalDataContainerSixMonthVolume"
		class="com.sap.retail.isce.container.impl.CARStatisticalDataContainerSixMonthVolume"
		scope="prototype">
		<constructor-arg ref="isceConfigurationService" />
		<property name="messageSource" ref="storefrontMessageSource" />
		<property name="i18nService" ref="i18nService" />
		<property name="userService" ref="userService" />
		<property name="statisticalDataSalesVolumeUtil" ref="statisticalDataSalesVolumeUtil" />
	</bean>

	<bean id="CARStatisticalDataContainerLastPurchase"
		class="com.sap.retail.isce.container.impl.CARStatisticalDataContainerLastPurchase"
		scope="prototype">
		<constructor-arg ref="isceConfigurationService" />
		<property name="messageSource" ref="storefrontMessageSource" />
		<property name="i18nService" ref="i18nService" />
		<property name="userService" ref="userService" />
	</bean>

	<bean id="CARStatisticalDataContainerOverallItemsCount"
		class="com.sap.retail.isce.container.impl.CARStatisticalDataContainerOverallItemsCount"
		scope="prototype">
		<constructor-arg ref="isceConfigurationService" />
		<property name="messageSource" ref="storefrontMessageSource" />
		<property name="i18nService" ref="i18nService" />
		<property name="userService" ref="userService" />
	</bean>

	<bean id="NewsletterSubscriptionDataContainer"
		class="com.sap.retail.isce.container.impl.NewsletterSubscriptionDataContainer"
		scope="prototype">
		<constructor-arg ref="isceConfigurationService" />
		<property name="messageSource" ref="storefrontMessageSource" />
		<property name="i18nService" ref="i18nService" />
	</bean>

	<bean name="objectScoresDataContainerAge"
		class="com.sap.retail.isce.container.impl.ObjectScoresDataContainer"
		scope="prototype">
		<constructor-arg value="CONTACT_AGE_SCORE" />
		<constructor-arg value="Age" />
		<constructor-arg ref="isceConfigurationService" />
		<property name="i18nService" ref="i18nService" />
		<property name="messageSource" ref="storefrontMessageSource" />
		<property name="springUtil" ref="springUtil" />
	</bean>

	<bean name="objectScoresDataContainerActivity"
		class="com.sap.retail.isce.container.impl.ObjectScoresDataContainer"
		scope="prototype">
		<constructor-arg value="CONTACT_ACTIVITY_SCORE" />
		<constructor-arg value="Activity" />
		<constructor-arg ref="isceConfigurationService" />
		<property name="i18nService" ref="i18nService" />
		<property name="messageSource" ref="storefrontMessageSource" />
		<property name="springUtil" ref="springUtil" />
	</bean>

	<bean name="objectScoresDataContainerSentiment"
		class="com.sap.retail.isce.container.impl.ObjectScoresDataContainer"
		scope="prototype">
		<constructor-arg value="CONTACT_SENTIMENT_SCORE" />
		<constructor-arg value="Sentiment" />
		<constructor-arg ref="isceConfigurationService" />
		<property name="i18nService" ref="i18nService" />
		<property name="messageSource" ref="storefrontMessageSource" />
		<property name="springUtil" ref="springUtil" />
	</bean>
	
	<bean name="genericScoresDataContainer"
		class="com.sap.retail.isce.container.impl.GenericScoresDataContainer"
		scope="prototype">
		<constructor-arg ref="isceConfigurationService" />
		<property name="i18nService" ref="i18nService" />
		<property name="messageSource" ref="storefrontMessageSource" />
		<property name="springUtil" ref="springUtil" />
	</bean>

	<bean name="itemsOfInterestDataContainer"
		class="com.sap.retail.isce.container.impl.ItemsOfInterestDataContainer"
		scope="prototype">
		<constructor-arg ref="isceConfigurationService" />
		<property name="i18nService" ref="i18nService" />
		<property name="messageSource" ref="storefrontMessageSource" />
	</bean>

	<bean name="dataContainerContext"
		class="com.sap.retail.isce.container.impl.DataContainerContextDefaultImpl"
		scope="prototype">
	</bean>

	<bean id="CARPurchaseHistoryDataContainerCustomerOrders"
		class="com.sap.retail.isce.container.impl.CARPurchaseHistoryDataContainerCustomerOrders"
		scope="prototype">
		<constructor-arg ref="isceConfigurationService" />
		<property name="messageSource" ref="storefrontMessageSource" />
		<property name="priceDataFactory" ref="priceDataFactory" />
		<property name="statisticalDataSalesVolumeUtil" ref="statisticalDataSalesVolumeUtil" />
		<property name="i18nService" ref="i18nService" />
		<property name="userService" ref="userService" />
	</bean>

	<bean depends-on="customer360JspProvidersMap" parent="mapMergeDirective">
		<property name="key" value="isceCustomer360Fragment" />
		<property name="value" value="addon:/yinstorecsfrontendaddon/cms/isceCustomer360Page" />
	</bean>

</beans>
